<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search and Populate Form</title>
  <style>
    /* Add your CSS styles here */
    #searchResults {
      position: absolute;
      width: 100%;
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid #ccc;
      background-color: #fff;
      z-index: 1;
    }

    #searchResults li {
      padding: 8px;
      cursor: pointer;
      list-style: none;
    }

    #searchResults li:hover {
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>

  <input type="text" id="searchInput" placeholder="Search...">
  <div id="searchResults"></div>

  <form id="infoForm">
    <label for="name">Name:</label>
    <input type="text" id="name" readonly>
    <label for="street">Street:</label>
    <input type="text" id="street" readonly>
    <label for="suburb">Suburb:</label>
    <input type="text" id="suburb" readonly>
    <label for="city">City:</label>
    <input type="text" id="city" readonly>
    <label for="notes">Notes:</label>
    <textarea id="notes" readonly></textarea>
  </form>

  <script>
    // Assuming data.csv has columns: Name, Street, Suburb, City, Notes
    const csvFilePath = 'https://raw.githubusercontent.com/SellwoodPro/sellwood/main/Contacts.csv';

    // Fetch data from CSV file
    fetch(csvFilePath)
      .then(response => response.text())
      .then(data => {
        const rows = data.split('\n').slice(1); // Skip header row
        const dataArray = rows.map(row => row.split(','));

        // Your search logic here
        document.getElementById('searchInput').addEventListener('input', function () {
          const searchTerm = this.value.toLowerCase();
          const searchResults = dataArray.filter(row =>
            row.some(col => col.toLowerCase().includes(searchTerm))
          );

          // Display search results in dropdown
          const resultsDropdown = document.getElementById('searchResults');
          resultsDropdown.innerHTML = '';

          searchResults.forEach(result => {
            const listItem = document.createElement('div');
            listItem.textContent = result[0]; // Assuming the first column is the Name
            listItem.addEventListener('click', function () {
              // Populate the form fields
              document.getElementById('name').value = result[0];
              document.getElementById('street').value = result[1];
              document.getElementById('suburb').value = result[2];
              document.getElementById('city').value = result[3];
              document.getElementById('notes').value = result[4];
              resultsDropdown.innerHTML = ''; // Clear dropdown after selection
            });

            resultsDropdown.appendChild(listItem);
          });
        });
      });
  </script>

</body>
</html>
